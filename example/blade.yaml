- name: service-one
  group: service
  watch:
    fs:
      path: cmd/service-one/
      ignore:
        - node_modules
        - .*
        - "**/*_test.go"
  env:
    - name: VAR_1
      value: VAL_1
    - name: VAR_2
      value: VAL_2
    - name: VAR_NO_VALUE
    - name: VAR_EMPTY
    - name: PATH
    - name: PWD
    - name: GOCACHE
    - name: HOME
      value:
  before: echo "do something at first run"
  run: go run cmd/service-one/main.go
  output:
    stdout: os
    stderr: os

- name: service-two
  group: service
  inheritEnv: true
  env:
    - name: VAR_3
      value: VAL_3
    - name: VAR_4
      value: VAL_4
    - name: VAR_NO_VALUE
    - name: VAR_EMPTY_QUOTE
      value: ""
  watch:
    fs:
      paths:
        - cmd/service-two/main.go
  run: go run cmd/service-two/main.go
  output:
    stdout: os
    stderr: os

- name: random-exit
  group: random
  inheritEnv: true
  run: go run cmd/random-exit/main.go
  output:
    stdout: os
    stderr: os

- name: random-panic
  group: random
  inheritEnv: true
  run: go run cmd/random-panic/main.go
  output:
    stdout: os
    stderr: os

- name: sigterm-duo
  skip: true
  inheritEnv: true
  run: go run cmd/sigterm-duo/main.go
  output:
    stdout: os
    stderr: os

- name: update-loop
  inheritEnv: true
  watch:
    fs:
      paths:
        - cmd/update-loop
  run: go run cmd/update-loop/main.go
  output:
    stdout: os
    stderr: os
